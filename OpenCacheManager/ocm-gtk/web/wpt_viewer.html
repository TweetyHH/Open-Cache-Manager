<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <style type="text/css">
#map {
        width: 100%;
        height: 100%;
        border: 0px;
        padding: 0px;
        position: absolute;
     }
body {
        border: 0px;
        margin: 0px;
        padding: 0px;
        height: 100%;
     }
    </style>
    <script src="http://www.openlayers.org/api/OpenLayers.js"></script>
    <script src="http://www.openstreetmap.org/openlayers/OpenStreetMap.js"></script>

    <script type="text/javascript">
        <!--
        // complex map object
        var map;
 
	// Start position for the map (hardcoded here for simplicity,
	// but maybe you want to get from URL params)
	var lat = 45.39271;
	var lon = -75.63399;
	var zoom = 14;
	var pois;
 
        function init(){
            map = new OpenLayers.Map('map',
                    { maxExtent: new OpenLayers.Bounds(-20037508.34,-20037508.34,20037508.34,20037508.34),
                      numZoomLevels: 19,
                      maxResolution: 156543.0399,
                      units: 'm',
                      projection: new OpenLayers.Projection("EPSG:900913"),
                      displayProjection: new OpenLayers.Projection("EPSG:4326")
                    });
 
            var layerMapnik = new OpenLayers.Layer.OSM.Mapnik("Mapnik");
 
            var layerTah = new OpenLayers.Layer.OSM.Osmarender("Tiles@Home");

	    var caches = new OpenLayers.Layer.Text("All Caches", { location: "markers.txt", projection: map.displayProjection});

 
            map.addLayers([layerMapnik,layerTah, caches]);
            map.addControl(new OpenLayers.Control.LayerSwitcher());
 
            var lonLat = new OpenLayers.LonLat(lon, lat).transform(map.displayProjection,  map.projection);
            if (!map.getCenter()) map.setCenter (lonLat, zoom);
        }

	function loadMarkers(lat, lon)
	{
	    if (pois)	    
		pois.destroy();    
	    pois = new OpenLayers.Layer.Text( "Waypoints",
                    { location:"childpts.txt",
                      projection: map.displayProjection
                    });
            map.addLayer(pois);
	    var lonLat = new OpenLayers.LonLat(lon, lat).transform(map.displayProjection,  map.projection);
	    map.setCenter (lonLat, 14)
	}


	function zoomToPoint(lat, lon)
	{
		var lonLat = new OpenLayers.LonLat(lon, lat).transform(map.displayProjection,  map.projection);		
		map.panTo(lonLat);
	}
        // -->
    </script>
  </head>
  <body onload="init()">
    <div id="map"></div>
  </body>
</html>
